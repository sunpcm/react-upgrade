# Modern React Monorepo Template

ğŸš€ **Monorepo æ¨¡æ¿** | åŸºäº Turborepo + pnpm Workspaces æ„å»º

è¿™æ˜¯ä¸€ä¸ªé›†æˆäº†å‰ç«¯ç”Ÿæ€æœ€æ–°æ ‡å‡†çš„é«˜æ€§èƒ½ Monorepo æ¨¡æ¿ã€‚æ˜¯ä¸€å¥—å…³äº**é…ç½®ç®¡ç†**ã€**ä¾èµ–æ²»ç†**å’Œ**æ¶æ„åˆ†å±‚**çš„å®è·µé›†åˆã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§ (Why this repo?)

æœ¬é¡¹ç›®é‡‡ç”¨äº†ç›®å‰æœ€å‰æ²¿çš„æŠ€æœ¯æ ˆç»„åˆï¼Œè§£å†³äº†ä¼ ç»Ÿ Monorepo çš„å¸¸è§ç—›ç‚¹ï¼š

- **âš¡ï¸ æé€Ÿæ„å»º (Turborepo)**: æ™ºèƒ½ä»»åŠ¡ç¼–æ’ä¸è¿œç¨‹ç¼“å­˜ï¼Œæ”¯æŒå¢é‡æ„å»ºä¸æŒ‰éœ€æ‰§è¡Œã€‚
- **ğŸ“¦ ä¾èµ–æ²»ç† (pnpm Catalog)**: ä½¿ç”¨ pnpm 9.x çš„ `catalog:` ç‰¹æ€§ï¼Œåœ¨æ ¹ç›®å½•ç»Ÿä¸€ç®¡ç† React, TypeScript, Tailwind ç­‰æ ¸å¿ƒä¾èµ–ç‰ˆæœ¬ï¼Œå½»åº•æ¶ˆç­â€œç‰ˆæœ¬ä¸ä¸€è‡´â€é—®é¢˜ã€‚
- **ğŸ¨ ä¸‹ä¸€ä»£æ ·å¼ (Tailwind CSS v4)**: é‡‡ç”¨ **CSS-first** æ¶æ„ï¼Œåˆ©ç”¨åŸç”Ÿ CSS å˜é‡å’Œ `@theme` æŒ‡ä»¤ç®¡ç†è®¾è®¡ç³»ç»Ÿï¼Œæ‘’å¼ƒå¤æ‚çš„ JS é…ç½®ã€‚
- **ğŸ›¡ï¸ ç°ä»£å·¥ç¨‹åŒ– (ESLint v9)**: å…¨é¢æ‹¥æŠ± **Flat Config**ï¼Œé…åˆ Prettierã€Husky å’Œ Lint-stagedï¼Œæä¾›æè‡´çš„ä»£ç è§„èŒƒä¿æŠ¤ã€‚
- **ğŸ§© æ¶æ„åˆ†å±‚ (App as Shell)**: æå€¡â€œåº”ç”¨å³å£³ï¼Œä¸šåŠ¡ä¸‹æ²‰â€çš„æ¶æ„æ¨¡å¼ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘çš„æè‡´å¤ç”¨ã€‚

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```text
.
â”œâ”€â”€ apps/                   # ã€åº”ç”¨å±‚ã€‘(ç»„è£…è½¦é—´)
â”‚   â”œâ”€â”€ vite-app/           # åŸºäº Vite çš„åº”ç”¨å£³å­
â”‚   â””â”€â”€ webpack-app/        # åŸºäº Webpack 5 çš„åº”ç”¨å£³å­
â”‚
â”œâ”€â”€ packages/               # ã€ä¾èµ–å±‚ã€‘(é›¶ä»¶å·¥å‚)
â”‚   â”œâ”€â”€ ui-lib/             # å…±äº« UI ç»„ä»¶åº“ (æ— ä¸šåŠ¡é€»è¾‘)
â”‚   â””â”€â”€ configs/            # ã€é…ç½®ä¸­å¿ƒã€‘(Single Source of Truth)
â”‚       â”œâ”€â”€ eslint-config/  # å…±äº« ESLint Flat Config
â”‚       â”œâ”€â”€ postcss-config/ # å…±äº« PostCSS é…ç½®
â”‚       â”œâ”€â”€ tailwind-config/# å…±äº« Tailwind v4 ä¸»é¢˜ä¸å˜é‡
â”‚       â””â”€â”€ tsconfig/       # å…±äº« TypeScript åŸºç¡€é…ç½®
â”‚
â”œâ”€â”€ .changeset/             # ç‰ˆæœ¬å‘å¸ƒç®¡ç†
â”œâ”€â”€ turbo.json              # ä»»åŠ¡ç¼–æ’é…ç½®
â””â”€â”€ pnpm-workspace.yaml     # å·¥ä½œåŒºå®šä¹‰ & Catalog ç‰ˆæœ¬ç®¡ç†

```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js >= 18
- pnpm >= 9.x

### å®‰è£…ä¾èµ–

```bash
pnpm install

```

### å¯åŠ¨å¼€å‘ç¯å¢ƒ

åŒæ—¶å¯åŠ¨æ‰€æœ‰åº”ç”¨ï¼ˆåˆ©ç”¨ Turbo å¹¶è¡Œæ‰§è¡Œï¼‰ï¼š

```bash
pnpm dev

```

æˆ–è€…åªå¯åŠ¨ç‰¹å®šåº”ç”¨ï¼š

```bash
pnpm dev --filter=vite-app

```

### æ„å»ºé¡¹ç›®

```bash
pnpm build

```

## ğŸ› ï¸ æœ€ä½³å®è·µæŒ‡å—

### 1. é…ç½®ç®¡ç† (Configuration)

æœ¬ä»“åº“éµå¾ª **"Single Source of Truth"** åŸåˆ™ã€‚æ‰€æœ‰çš„å·¥ç¨‹åŒ–é…ç½®ï¼ˆTS, ESLint, Tailwindï¼‰éƒ½æå–åˆ°äº† `packages/configs` ä¸­ã€‚

- **æ–°å¢é…ç½®**ï¼šè¯·åœ¨ `packages/configs` ä¸‹ä¿®æ”¹ï¼Œä¸è¦åœ¨ App å†…éƒ¨é€šè¿‡å¤åˆ¶ç²˜è´´è§£å†³ã€‚
- **å¼•ç”¨é…ç½®**ï¼šApp é€šè¿‡ `package.json` çš„ `devDependencies` å¼•å…¥å…±äº«åŒ…ï¼Œä¾‹å¦‚ `"@biu/tsconfig": "workspace:*"`ã€‚

### 2. æ ·å¼å¼€å‘ (Tailwind v4)

æˆ‘ä»¬ä½¿ç”¨ Tailwind v4 çš„ CSS-first æ¨¡å¼ã€‚åœ¨å¼•å…¥å…±äº«ä¸»é¢˜æ—¶ï¼Œ**å¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹é¡ºåº**ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š

```css
/* apps/xxx/src/styles.css */

/* âœ… æ­£ç¡®é¡ºåºï¼šå…ˆé…ç½®ï¼Œåç”Ÿæˆ */

/* 1. å¼•å…¥å…±äº«é…ç½® (å®šä¹‰å˜é‡) */
@import "@biu/tailwind-config";

/* 2. å¼•å…¥æ¡†æ¶æ ¸å¿ƒ (ç”Ÿæˆå·¥å…·ç±») */
@import "tailwindcss";

/* 3. é…ç½®æ‰«æè·¯å¾„ */
@source "../index.html";
@source "./**/*.{js,jsx,ts,tsx}";
@source "../../packages/ui-lib/**/*.{js,jsx,ts,tsx}";
```

### 3. ä¸šåŠ¡å¼€å‘ (App as Shell)

ä¸ºäº†æœ€å¤§åŒ–ä»£ç å¤ç”¨ï¼Œå»ºè®®éµå¾ªä»¥ä¸‹å¼€å‘æµï¼š

- **UI ç»„ä»¶**ï¼šæ”¾å…¥ `packages/ui-lib`ã€‚
- **ä¸šåŠ¡é€»è¾‘/Hooks/çŠ¶æ€**ï¼šå»ºè®®æ–°å»º `packages/features` æˆ– `packages/core` (Coming Soon)ã€‚
- **åº”ç”¨ (Apps)**ï¼šä»…ä½œä¸ºâ€œå£³â€ï¼Œè´Ÿè´£è·¯ç”±é…ç½®ã€Providers æ³¨å…¥å’Œç»„ä»¶ç»„è£…ã€‚

## ğŸ“¦ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

| å‘½ä»¤         | è¯´æ˜                     |
| ------------ | ------------------------ |
| `pnpm dev`   | å¯åŠ¨æ‰€æœ‰åº”ç”¨çš„å¼€å‘æœåŠ¡å™¨ |
| `pnpm build` | æ„å»ºæ‰€æœ‰åº”ç”¨å’ŒåŒ…         |
| `pnpm lint`  | æ‰§è¡Œ ESLint ä»£ç æ£€æŸ¥     |

## ğŸ§° æ–°å»º Packageï¼ˆè‡ªåŠ¨æ¥å…¥ ESLint/Prettier/TSConfigï¼‰

å½“ä½ æ–°å»ºä¸€ä¸ª workspace packageï¼ˆ`packages/*` æˆ– `packages/configs/*`ï¼‰æ—¶ï¼Œé€šå¸¸éœ€è¦æ‰‹å·¥è¡¥é½ï¼š

- `@biu/eslint-config`ï¼ˆç»Ÿä¸€ ESLint v9 Flat Configï¼‰
- `@biu/tsconfig`ï¼ˆç»Ÿä¸€ TS é…ç½®ï¼‰
- `"prettier": "@biu/prettier-config"`ï¼ˆæ–¹æ¡ˆ Aï¼‰

ä¸ºäº†é¿å…é‡å¤åŠ³åŠ¨ï¼Œæœ¬ä»“åº“æä¾›äº† Plop ç”Ÿæˆå™¨ã€‚

### äº¤äº’å¼åˆ›å»ºï¼ˆæ¨èï¼‰

```bash
pnpm -w new:pkg
```

ä½ å¯ä»¥åœ¨äº¤äº’é‡Œé€‰æ‹©ï¼š

- ç”Ÿæˆåˆ° `packages/` è¿˜æ˜¯ `packages/configs/`
- æ˜¯å¦ç”Ÿæˆå¸¦ React peerDependencies çš„åŒ…
- åŒ…åé»˜è®¤ä¼šè‡ªåŠ¨è¡¥ `@biu/` å‰ç¼€ï¼ˆå½“ç„¶ä¹Ÿæ”¯æŒä½ ç›´æ¥è¾“å…¥ `@biu/foo`ï¼‰

### éäº¤äº’å¼åˆ›å»ºï¼ˆå¯ç”¨äºè„šæœ¬ï¼‰

```bash
pnpm -w gen package -- --scope niu --name demo-lib --kind lib --dir packages --react false
```

> æ³¨æ„ï¼šç”Ÿæˆåéœ€è¦æ‰§è¡Œä¸€æ¬¡å®‰è£…ï¼ˆ`pnpm -w install`ï¼‰ï¼Œè®©æ–°åŒ…è¿›å…¥ lockfile / turbo scopeã€‚

## ğŸ¤ è´¡çŒ®ä¸è§„èŒƒ

- **æäº¤è§„èŒƒ**: éµå¾ª Conventional Commits (ä¾‹å¦‚: `feat: add new button component`)ã€‚
- **ä»£ç é£æ ¼**: æäº¤å‰ä¼šè‡ªåŠ¨è¿è¡Œ `eslint --fix`ï¼Œè¯·ç¡®ä¿æ— æŠ¥é”™ã€‚

---

Built with â¤ï¸ using [Turborepo](https://turbo.build/repo) & [pnpm](https://pnpm.io/).
